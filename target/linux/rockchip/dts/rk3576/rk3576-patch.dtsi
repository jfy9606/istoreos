#include <dt-bindings/thermal/thermal.h>
#include "rk3576-no-power-domain.dtsi"

/ {
	thermal_zones: thermal-zones {
		/* sensor near the center of the SoC */
		package_thermal: package-thermal {
			polling-delay-passive = <0>;
			polling-delay = <0>;
			thermal-sensors = <&tsadc 0>;

			trips {
				package_crit: package-crit {
					temperature = <115000>;
					hysteresis = <0>;
					type = "critical";
				};
			};
		};

		/* sensor for cluster1 (big Cortex-A72 cores) */
		bigcore_thermal: bigcore-thermal {
			polling-delay-passive = <100>;
			polling-delay = <0>;
			thermal-sensors = <&tsadc 1>;

			trips {
				bigcore_alert: bigcore-alert {
					temperature = <85000>;
					hysteresis = <2000>;
					type = "passive";
				};

				bigcore_crit: bigcore-crit {
					temperature = <115000>;
					hysteresis = <0>;
					type = "critical";
				};
			};

			cooling-maps {
				map0 {
					trip = <&bigcore_alert>;
					cooling-device =
						<&cpu_b0 THERMAL_NO_LIMIT THERMAL_NO_LIMIT>,
						<&cpu_b1 THERMAL_NO_LIMIT THERMAL_NO_LIMIT>,
						<&cpu_b2 THERMAL_NO_LIMIT THERMAL_NO_LIMIT>,
						<&cpu_b3 THERMAL_NO_LIMIT THERMAL_NO_LIMIT>;
				};
			};
		};

		/* sensor for cluster0 (little Cortex-A53 cores) */
		littlecore_thermal: littlecore-thermal {
			polling-delay-passive = <100>;
			polling-delay = <0>;
			thermal-sensors = <&tsadc 2>;

			trips {
				littlecore_alert: littlecore-alert {
					temperature = <85000>;
					hysteresis = <2000>;
					type = "passive";
				};

				littlecore_crit: littlecore-crit {
					temperature = <115000>;
					hysteresis = <0>;
					type = "critical";
				};
			};

			cooling-maps {
				map0 {
					trip = <&littlecore_alert>;
					cooling-device =
						<&cpu_l0 THERMAL_NO_LIMIT THERMAL_NO_LIMIT>,
						<&cpu_l1 THERMAL_NO_LIMIT THERMAL_NO_LIMIT>,
						<&cpu_l2 THERMAL_NO_LIMIT THERMAL_NO_LIMIT>,
						<&cpu_l3 THERMAL_NO_LIMIT THERMAL_NO_LIMIT>;
				};
			};
		};

		gpu_thermal: gpu-thermal {
			polling-delay-passive = <100>;
			polling-delay = <0>;
			thermal-sensors = <&tsadc 3>;

			trips {
				gpu_alert: gpu-alert {
					temperature = <85000>;
					hysteresis = <2000>;
					type = "passive";
				};

				gpu_crit: gpu-crit {
					temperature = <115000>;
					hysteresis = <0>;
					type = "critical";
				};
			};

			cooling-maps {
				map0 {
					trip = <&gpu_alert>;
					cooling-device =
						<&gpu THERMAL_NO_LIMIT THERMAL_NO_LIMIT>;
				};
			};
		};

		npu_thermal: npu-thermal {
			polling-delay-passive = <0>;
			polling-delay = <0>;
			thermal-sensors = <&tsadc 4>;

			trips {
				npu_crit: npu-crit {
					temperature = <115000>;
					hysteresis = <0>;
					type = "critical";
				};
			};
		};

		ddr_thermal: ddr-thermal {
			polling-delay-passive = <0>;
			polling-delay = <0>;
			thermal-sensors = <&tsadc 5>;

			trips {
				ddr_crit: ddr-crit {
					temperature = <115000>;
					hysteresis = <0>;
					type = "critical";
				};
			};
		};
	};

	soc {
		crypto: crypto@2a400000 {
			compatible = "rockchip,crypto-v4";
			reg = <0x0 0x2a400000 0x0 0x2000>;
			interrupts = <GIC_SPI 177 IRQ_TYPE_LEVEL_HIGH>;
			clocks = <&cru ACLK_CRYPTO_NS>, <&cru HCLK_CRYPTO_NS>,
				<&cru CLK_PKA_CRYPTO_NS>;
			clock-names = "aclk", "hclk", "pka";
			assigned-clocks = <&cru ACLK_CRYPTO_NS>, <&cru CLK_PKA_CRYPTO_NS>;
			assigned-clock-rates = <300000000>, <300000000>;
			resets = <&cru SRST_H_CRYPTO_NS>;
			reset-names = "crypto-rst";
			status = "disabled";
		};

		rng: rng@2a410000 {
			compatible = "rockchip,rkrng";
			reg = <0x0 0x2a410000 0x0 0x200>;
			interrupts = <GIC_SPI 181 IRQ_TYPE_LEVEL_HIGH>;
			clocks = <&cru HCLK_TRNG_NS>;
			clock-names = "hclk_trng";
			resets = <&cru SRST_H_TRNG_NS>;
			reset-names = "reset";
			status = "disabled";
		};

		tsadc: tsadc@2ae70000 {
			compatible = "rockchip,rk3576-tsadc";
			reg = <0x0 0x2ae70000 0x0 0x400>;
			interrupts = <GIC_SPI 123 IRQ_TYPE_LEVEL_HIGH>;
			clocks = <&cru CLK_TSADC>, <&cru PCLK_TSADC>;
			clock-names = "tsadc", "apb_pclk";
			assigned-clocks = <&cru CLK_TSADC>;
			assigned-clock-rates = <2000000>;
			resets = <&cru SRST_TSADC>, <&cru SRST_P_TSADC>;
			reset-names = "tsadc", "tsadc-apb";
			#thermal-sensor-cells = <1>;
			rockchip,hw-tshut-temp = <120000>;
			rockchip,hw-tshut-mode = <0>; /* tshut mode 0:CRU 1:GPIO */
			rockchip,hw-tshut-polarity = <0>; /* tshut polarity 0:LOW 1:HIGH */
			status = "disabled";
		};
	};
};

&cpu_l1 {
	#cooling-cells = <2>;
};

&cpu_l2 {
	#cooling-cells = <2>;
};

&cpu_l3 {
	#cooling-cells = <2>;
};

&cpu_b1 {
	#cooling-cells = <2>;
};

&cpu_b2 {
	#cooling-cells = <2>;
};

&cpu_b3 {
	#cooling-cells = <2>;
};
